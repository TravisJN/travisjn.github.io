
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>How to work with D3.js Transitions</title>
    <meta name="description" content="">

    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="shortcut icon" href="../favicon.ico">

    <link rel="stylesheet" type="text/css" href="../assets/css/screen.css?v=deaa48a2cf">
    <link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Merriweather:300,700,700italic,300italic%7COpen+Sans:700,400">

    <link rel="canonical" href="http://localhost:2368/how-to-work-with-d3-js-transitions/">
    
    <meta property="og:site_name" content="TravLearnsJS">
    <meta property="og:type" content="article">
    <meta property="og:title" content="How to work with D3.js Transitions">
    <meta property="og:description" content="D3 is a powerful JavaScript library that allows data to be manipulated visually in the browser.  There are some incredible examples of what can be created here.  If you know how to use it, D3 can liberate your application's appearance...">
    <meta property="og:url" content="http://localhost:2368/how-to-work-with-d3-js-transitions/">
    <meta property="article:published_time" content="2015-03-25T02:18:12.754Z">
    <meta property="article:modified_time" content="2015-03-25T02:18:12.753Z">
    
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="How to work with D3.js Transitions">
    <meta name="twitter:description" content="D3 is a powerful JavaScript library that allows data to be manipulated visually in the browser.  There are some incredible examples of what can be created here.  If you know how to use it, D3 can liberate your application's appearance...">
    <meta name="twitter:url" content="http://localhost:2368/how-to-work-with-d3-js-transitions/">
    
    <script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "Article",
    "publisher": "TravLearnsJS",
    "author": {
        "@type": "Person",
        "name": "Travis Neufeld",
        "image": "//www.gravatar.com/avatar/d02f1d451097a193d4d54da68ad468c2?s=250&d=mm&r=x",
        "url": "http://localhost:2368/author/travis",
        "sameAs": null
    },
    "headline": "How to work with D3.js Transitions",
    "url": "http://localhost:2368/how-to-work-with-d3-js-transitions/",
    "datePublished": "2015-03-25T02:18:12.754Z",
    "dateModified": "2015-03-25T02:18:12.753Z",
    "description": "D3 is a powerful JavaScript library that allows data to be manipulated visually in the browser.  There are some incredible examples of what can be created here.  If you know how to use it, D3 can liberate your application&#x27;s appearance..."
}
    </script>

    <meta name="generator" content="Ghost 0.5">
    <link rel="alternate" type="application/rss+xml" title="TravLearnsJS" href="http://localhost:2368/rss/">
</head>
<body class="post-template nav-closed">

    <div class="nav">
    <h3 class="nav-title">Menu</h3>
    <a href="index.html#" class="nav-close">
        <span class="hidden">Close</span>
    </a>
    <ul>
            <li class="nav-home" role="presentation"><a href="http://localhost:2368/">Home</a></li>
    </ul>
    <a class="subscribe-button icon-feed" href="../rss/index.rss">Subscribe</a>
</div>
<span class="nav-cover"></span>


    <div class="site-wrapper">

        


<header class="main-header post-head no-cover">
    <nav class="main-nav  clearfix">
        
            <a class="menu-button" href="index.html#"><span class="burger">☰</span><span class="word">Menu</span></a>
    </nav>
</header>

<main class="content" role="main">
    <article class="post">

        <header class="post-header">
            <h1 class="post-title">How to work with D3.js Transitions</h1>
            <section class="post-meta">
                <time class="post-date" datetime="2015-03-24">24 March 2015</time> 
            </section>
        </header>

        <section class="post-content">
            <p>D3 is a powerful JavaScript library that allows data to be manipulated visually in the browser.  There are some incredible examples of what can be created here.  If you know how to use it, D3 can liberate your application's appearance and give your users an incredible and engaging way to interact with your product.  There are numerous tutorials online for getting started so I'm just going to delve into one particular aspect that left me scratching my head for some time until, after enough research and understanding, I was able to realize what was happening under the hood of this fantastic library.</p>

<p> </p>

<h2>Transitions</h2>  

<p>The built-in transition methods in D3 are what allow the library to be really engaging and make your applications look and feel professional without much code.  An example would be if you wanted to move a &lt;div&gt; with a location at { top : 0px } to a new location at { top : 20px }.  To smoothly animate the &lt;div&gt; down the screen with D3, you would simply type:  </p>

<blockquote>d3.select('body').selectAll('div').transition().style('top', '20px');</blockquote>  

<p>Easy enough, but that transition takes time.  And what if we needed to check up on it while it's transitioning?  For instance, if we were making a game and that div is a bomb that explodes as soon as it touches the player.  We would need to get inside that transition and run our "collisionCheck" function at every step.  Well D3 allows us to do just that.</p>

<p> </p>

<h2>Tweening</h2>  

<p>Tweens are the steps or animations in-between the start and end of an action.  In our example above, the start is { top : 0px } and the end is { top : 20px } so any point in which our div is shown on the screen between 1px and 19px is a tween.  (Note: D3 will refresh the screen 60 times per second so the animation doesn't just move in 1px increments).  Now let's talk about how we can run our collision detection function at each step along the transition.  It turns out that D3 has a .tween() method which allows us to run a custom function at each frame.  To use it, we would write:</p>

<p> </p>

<blockquote>d3.select('body')

  .selectAll('div')

  .transition()

  .style('top', '20px')

  .tween(function(time){

    var current_Y_Position = d3.select('body').selectAll('div').style('top');
    collisionDetectionFunction(yPosition);

});</blockquote>

<p>And that's it!  The tween method allows us to call our custom function, in this case collisionDetectionFunction(). But we need to get the current 'top' value in order to check that against our player to see if they've collided, so we run a D3 selector to get our current Y position.  There's an interesting point here about how D3 acts on objects in transitions.  Each time the screen refreshes, the top value needs to be at some point in between start and end and D3's magic does the math to figure out what that top value actually needs to be at any specific frame.  If we paused the application halfway through the transition and looked at its css top value, it would be 10px.  Our css file would show { top : 10px }.  That allows us to run our D3 selector in the .tween() method and pull whatever the css value is on that frame.  Thanks D3!  There's one more aspect, let's talk about the time parameter that gets passed into our function.  time is a number between 0 and 1 where 0 is the starting frame and 1 is the ending frame of the transition so we are essentially passed how far along the transition we are as a percentage.  To clarify, exactly halfway through our example, we would have top : 10px and time = 0.5 (or 50%).</p>
        </section>

        <footer class="post-footer">


            <figure class="author-image">
                <a class="img" href="../author/travis/" style="background-image: url(http://www.gravatar.com/avatar/d02f1d451097a193d4d54da68ad468c2?s=250&amp;d=mm&amp;r=x)"><span class="hidden">Travis Neufeld's Picture</span></a>
            </figure>

            <section class="author">
                <h4><a href="../author/travis/">Travis Neufeld</a></h4>

                    <p>Read <a href="../author/travis/">more posts</a> by this author.</p>
                <div class="author-meta">
                    
                    
                </div>
            </section>


            <section class="share">
                <h4>Share this post</h4>
                <a class="icon-twitter" href="https://twitter.com/share?text=How%20to%20work%20with%20D3.js%20Transitions&amp;url=http://localhost:2368/how-to-work-with-d3-js-transitions/" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
                    <span class="hidden">Twitter</span>
                </a>
                <a class="icon-facebook" href="https://www.facebook.com/sharer/sharer.php?u=http://localhost:2368/how-to-work-with-d3-js-transitions/" onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
                    <span class="hidden">Facebook</span>
                </a>
                <a class="icon-google-plus" href="https://plus.google.com/share?url=http://localhost:2368/how-to-work-with-d3-js-transitions/" onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
                    <span class="hidden">Google+</span>
                </a>
            </section>

        </footer>

    </article>
</main>



        <footer class="site-footer clearfix">
            <section class="copyright"><a href="http://localhost:2368">TravLearnsJS</a> © 2015</section>
            <section class="poweredby">Proudly published with <a href="https://ghost.org">Ghost</a></section>
        </footer>

    </div>

    <script src="../public/jquery.js?v=deaa48a2cf"></script>

    <script type="text/javascript" src="../assets/js/jquery.fitvids.js?v=deaa48a2cf"></script>
    <script type="text/javascript" src="../assets/js/index.js?v=deaa48a2cf"></script>

</body>
